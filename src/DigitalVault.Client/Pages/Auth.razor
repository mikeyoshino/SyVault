@page "/auth"
@attribute [Microsoft.AspNetCore.Authorization.AllowAnonymous]
@layout EmptyLayout
@using DigitalVault.Client.Services
@using System.ComponentModel.DataAnnotations
@inject AuthService AuthService
@inject NavigationManager NavigationManager
@inject IJSRuntime JSRuntime

<PageTitle>HeritageVault - ‡∏£‡∏∞‡∏ö‡∏ö‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏°‡∏£‡∏î‡∏Å</PageTitle>

<style>
    body {
        font-family: 'Kanit', sans-serif;
        background-color: #f8fafc;
        background-image: radial-gradient(#e2e8f0 1px, transparent 1px);
        background-size: 40px 40px;
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .main-card {
        background: #ffffff;
        border: 1px solid #e2e8f0;
    }

    .input-field {
        background: #ffffff;
        border: 1px solid #cbd5e1;
        transition: all 0.2s ease;
    }

    .input-field:focus {
        border-color: #b45309;
        outline: none;
        box-shadow: 0 0 0 2px rgba(180, 83, 9, 0.1);
    }

    .btn-solid {
        background-color: #d97706;
    }

    .btn-solid:hover {
        background-color: #b45309;
    }

    .btn-solid:disabled {
        background-color: #cbd5e1;
        cursor: not-allowed;
    }

    .fade-in {
        animation: fadeIn 0.5s ease-out;
    }

    @@keyframes fadeIn {
        from {
            opacity: 0;
            transform: translateY(10px);
        }

        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .error-message {
        background-color: #fee2e2;
        border: 1px solid #ef4444;
        color: #b91c1c;
        padding: 12px;
        border-radius: 12px;
        margin-bottom: 16px;
        font-size: 14px;
    }

    .success-message {
        background-color: #d1fae5;
        border: 1px solid #10b981;
        color: #065f46;
        padding: 12px;
        border-radius: 12px;
        margin-bottom: 16px;
        font-size: 14px;
    }
</style>

<link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500;600&display=swap" rel="stylesheet">

<div class="max-w-md w-full px-6 py-12">
    <!-- Logo Area -->
    <div class="text-center mb-8">
        <div
            class="inline-flex items-center justify-center w-16 h-16 rounded-2xl bg-white border border-slate-200 mb-4">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-amber-700" fill="none" viewBox="0 0 24 24"
                stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" />
            </svg>
        </div>
        <h1 class="text-3xl font-semibold text-slate-800 tracking-tight">HeritageVault</h1>
        <p class="text-slate-500 mt-2 text-sm">‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏™‡πà‡∏á‡∏ï‡πà‡∏≠‡∏°‡∏£‡∏î‡∏Å‡∏ó‡∏≤‡∏á‡∏î‡∏¥‡∏à‡∏¥‡∏ó‡∏±‡∏•‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</p>
    </div>

    <!-- Main Card -->
    <div class="main-card rounded-3xl p-8 md:p-10 fade-in">
        <!-- Tabs -->
        <div class="flex mb-8 bg-slate-100 p-1.5 rounded-2xl border border-slate-200">
            <button @onclick="() => SwitchTab(true)"
                class="flex-1 py-2.5 text-sm @(isLoginTab ? "font-semibold bg-white text-amber-800 border border-slate-200" : "font-medium text-slate-500 hover:text-slate-700") rounded-xl transition-all duration-300">
                ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö
            </button>
            <button @onclick="() => SwitchTab(false)"
                class="flex-1 py-2.5 text-sm @(!isLoginTab ? "font-semibold bg-white text-amber-800 border border-slate-200" : "font-medium text-slate-500 hover:text-slate-700") rounded-xl transition-all duration-300">
                ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å
            </button>
        </div>

        @if (!string.IsNullOrEmpty(errorMessage))
        {
            <div class="error-message">
                @errorMessage
            </div>
        }

        @if (!string.IsNullOrEmpty(successMessage))
        {
            <div class="success-message">
                @successMessage
            </div>
        }

        @if (isLoginTab)
        {
            <!-- Login Form -->
            <EditForm Model="loginModel" OnValidSubmit="HandleLogin" class="space-y-5">
                <DataAnnotationsValidator />

                <div>
                    <label class="block text-slate-700 text-sm font-medium mb-2 px-1">‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</label>
                    <InputText @bind-Value="loginModel.Email" type="email" placeholder="example@email.com"
                        class="input-field w-full px-4 py-3 rounded-xl text-slate-900 placeholder-slate-400" />
                    <ValidationMessage For="@(() => loginModel.Email)" class="text-red-500 text-xs mt-1" />
                </div>

                <div>
                    <label class="block text-slate-700 text-sm font-medium mb-2 px-1">‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</label>
                    <InputText @bind-Value="loginModel.Password" type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"
                        class="input-field w-full px-4 py-3 rounded-xl text-slate-900 placeholder-slate-400" />
                    <ValidationMessage For="@(() => loginModel.Password)" class="text-red-500 text-xs mt-1" />
                </div>

                <div class="flex items-center justify-between text-xs px-1">
                    <label class="flex items-center text-slate-600 cursor-pointer">
                        <InputCheckbox @bind-Value="loginModel.RememberMe"
                            class="mr-2 rounded border-slate-300 text-amber-700" />
                        ‡∏à‡∏î‡∏à‡∏≥‡∏â‡∏±‡∏ô‡πÉ‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ô‡∏µ‡πâ
                    </label>
                    <a href="#" class="text-amber-800 font-medium hover:text-amber-700 transition-colors">‡∏•‡∏∑‡∏°‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô?</a>
                </div>

                <button type="submit" disabled="@isLoading"
                    class="btn-solid w-full py-4 rounded-xl text-white font-semibold transition-all active:scale-[0.99]">
                    @if (isLoading)
                    {
                        <span>‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö...</span>
                    }
                    else
                    {
                        <span>‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢</span>
                    }
                </button>
            </EditForm>
        }
        else
        {
            <!-- Register Form -->
            <EditForm Model="registerModel" OnValidSubmit="HandleRegister" class="space-y-5">
                <DataAnnotationsValidator />

                <div>
                    <label class="block text-slate-700 text-sm font-medium mb-2 px-1">‡∏≠‡∏µ‡πÄ‡∏°‡∏•</label>
                    <InputText @bind-Value="registerModel.Email" type="email" placeholder="example@email.com"
                        class="input-field w-full px-4 py-3 rounded-xl text-slate-900 placeholder-slate-400" />
                    <ValidationMessage For="@(() => registerModel.Email)" class="text-red-500 text-xs mt-1" />
                </div>

                <div>
                    <label class="block text-slate-700 text-sm font-medium mb-2 px-1">‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå (‡πÑ‡∏°‡πà‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö)</label>
                    <div class="flex gap-2">
                        <!-- Country Code Selector with Search -->
                        <div class="relative" style="width: 140px;">
                            <button type="button" @onclick="ToggleCountryDropdown"
                                class="input-field w-full px-3 py-3 rounded-xl text-slate-900 flex items-center justify-between">
                                <span class="text-sm">@selectedCountry.Flag @selectedCountry.Code</span>
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M19 9l-7 7-7-7"></path>
                                </svg>
                            </button>

                            @if (showCountryDropdown)
                            {
                                <div
                                    class="absolute z-50 mt-2 w-80 bg-white border border-slate-200 rounded-xl shadow-lg max-h-80 overflow-hidden">
                                    <!-- Search Box -->
                                    <div class="p-3 border-b border-slate-200">
                                        <input type="text" @bind="countrySearchQuery" @bind:event="oninput"
                                            @onkeyup="FilterCountries"
                                            placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏£‡∏´‡∏±‡∏™‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏® ‡∏´‡∏£‡∏∑‡∏≠‡∏ä‡∏∑‡πà‡∏≠ (‡πÄ‡∏ä‡πà‡∏ô 66 ‡∏´‡∏£‡∏∑‡∏≠ Thailand)"
                                            class="w-full px-3 py-2 border border-slate-300 rounded-lg text-sm focus:outline-none focus:border-amber-600" />
                                    </div>

                                    <!-- Country List -->
                                    <div class="overflow-y-auto max-h-60">
                                        @foreach (var country in filteredCountries)
                                        {
                                            <button type="button" @onclick="() => SelectCountry(country)"
                                                class="w-full px-4 py-2.5 text-left hover:bg-slate-50 flex items-center gap-3 transition-colors">
                                                <span class="text-xl">@country.Flag</span>
                                                <span class="flex-1 text-sm text-slate-700">@country.Name</span>
                                                <span class="text-sm font-medium text-slate-900">@country.Code</span>
                                            </button>
                                        }
                                    </div>
                                </div>
                            }
                        </div>

                        <!-- Phone Number Input -->
                        <InputText @bind-Value="registerModel.PhoneNumber" type="tel" placeholder="812345678"
                            class="input-field flex-1 px-4 py-3 rounded-xl text-slate-900 placeholder-slate-400" />
                    </div>
                    <p class="text-xs text-slate-500 mt-1 px-1">‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á: ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å +66 ‡πÅ‡∏•‡πâ‡∏ß‡πÉ‡∏™‡πà 812345678</p>
                </div>

                <div>
                    <label class="block text-slate-700 text-sm font-medium mb-2 px-1">‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà</label>
                    <InputText @bind-Value="registerModel.Password" type="password" placeholder="‡∏£‡∏∞‡∏ö‡∏∏‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 8 ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£"
                        class="input-field w-full px-4 py-3 rounded-xl text-slate-900 placeholder-slate-400" />
                    <ValidationMessage For="@(() => registerModel.Password)" class="text-red-500 text-xs mt-1" />
                    <p class="text-xs text-slate-500 mt-1 px-1">‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏≠‡∏±‡∏Å‡∏©‡∏£‡∏û‡∏¥‡∏°‡∏û‡πå‡πÉ‡∏´‡∏ç‡πà, ‡∏û‡∏¥‡∏°‡∏û‡πå‡πÄ‡∏•‡πá‡∏Å, ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç
                        ‡πÅ‡∏•‡∏∞‡∏≠‡∏±‡∏Å‡∏Ç‡∏£‡∏∞‡∏û‡∏¥‡πÄ‡∏®‡∏©</p>
                </div>

                <div>
                    <label class="block text-slate-700 text-sm font-medium mb-2 px-1">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</label>
                    <InputText @bind-Value="registerModel.ConfirmPassword" type="password"
                        placeholder="‡∏õ‡πâ‡∏≠‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á"
                        class="input-field w-full px-4 py-3 rounded-xl text-slate-900 placeholder-slate-400" />
                    <ValidationMessage For="@(() => registerModel.ConfirmPassword)" class="text-red-500 text-xs mt-1" />
                </div>

                <p class="text-[11px] text-slate-500 text-center leading-relaxed">
                    ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Å‡∏î‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô ‡πÅ‡∏™‡∏î‡∏á‡∏ß‡πà‡∏≤‡∏Ñ‡∏∏‡∏ì‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö <a href="#" class="text-amber-800 underline">‡∏Ç‡πâ‡∏≠‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</a>
                    ‡πÅ‡∏•‡∏∞‡∏ô‡πÇ‡∏¢‡∏ö‡∏≤‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤
                </p>

                <button type="submit" disabled="@isLoading"
                    class="btn-solid w-full py-4 rounded-xl text-white font-semibold transition-all active:scale-[0.99]">
                    @if (isLoading)
                    {
                        <span>‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏´‡πâ‡∏≠‡∏á‡∏ô‡∏¥‡∏£‡∏†‡∏±‡∏¢...</span>
                    }
                    else
                    {
                        <span>‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏´‡πâ‡∏≠‡∏á‡∏ô‡∏¥‡∏£‡∏†‡∏±‡∏¢‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß</span>
                    }
                </button>
            </EditForm>
        }

        <!-- Security Indicators -->
        <div class="mt-10 pt-8 border-t border-slate-100 flex justify-center items-center space-x-6">
            <div class="flex items-center text-[10px] text-slate-400 uppercase tracking-widest font-semibold">
                <svg class="w-4 h-4 mr-1 text-emerald-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5"
                        d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z">
                    </path>
                </svg>
                AES-256 Encrypted
            </div>
            <div class="flex items-center text-[10px] text-slate-400 uppercase tracking-widest font-semibold">
                <svg class="w-4 h-4 mr-1 text-emerald-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5"
                        d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z">
                    </path>
                </svg>
                Zero Knowledge
            </div>
        </div>
    </div>

    <!-- Footer -->
    <p class="text-center text-slate-400 text-xs mt-8">
        ¬© 2026 HeritageVault. ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡∏∑‡∏≠‡∏û‡∏±‡∏ô‡∏ò‡∏Å‡∏¥‡∏à‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤
    </p>
</div>

@code {
    private bool isLoginTab = true;
    private bool isLoading = false;
    private string? errorMessage;
    private string? successMessage;

    private LoginModel loginModel = new();
    private RegisterModel registerModel = new();

    // Country code selector state
    private bool showCountryDropdown = false;
    private string countrySearchQuery = "";
    private CountryCode selectedCountry = new() { Code = "+66", Name = "Thailand", Flag = "üáπüá≠" };
    private List<CountryCode> filteredCountries = new();
    private List<CountryCode> allCountries = new()
{
new() { Code = "+66", Name = "Thailand", Flag = "üáπüá≠" },
new() { Code = "+1", Name = "United States", Flag = "üá∫üá∏" },
new() { Code = "+44", Name = "United Kingdom", Flag = "üá¨üáß" },
new() { Code = "+81", Name = "Japan", Flag = "üáØüáµ" },
new() { Code = "+82", Name = "South Korea", Flag = "üá∞üá∑" },
new() { Code = "+86", Name = "China", Flag = "üá®üá≥" },
new() { Code = "+91", Name = "India", Flag = "üáÆüá≥" },
new() { Code = "+65", Name = "Singapore", Flag = "üá∏üá¨" },
new() { Code = "+60", Name = "Malaysia", Flag = "üá≤üáæ" },
new() { Code = "+62", Name = "Indonesia", Flag = "üáÆüá©" },
new() { Code = "+63", Name = "Philippines", Flag = "üáµüá≠" },
new() { Code = "+84", Name = "Vietnam", Flag = "üáªüá≥" },
new() { Code = "+95", Name = "Myanmar", Flag = "üá≤üá≤" },
new() { Code = "+855", Name = "Cambodia", Flag = "üá∞üá≠" },
new() { Code = "+856", Name = "Laos", Flag = "üá±üá¶" },
new() { Code = "+61", Name = "Australia", Flag = "üá¶üá∫" },
new() { Code = "+64", Name = "New Zealand", Flag = "üá≥üáø" },
new() { Code = "+49", Name = "Germany", Flag = "üá©üá™" },
new() { Code = "+33", Name = "France", Flag = "üá´üá∑" },
new() { Code = "+39", Name = "Italy", Flag = "üáÆüáπ" },
new() { Code = "+34", Name = "Spain", Flag = "üá™üá∏" },
new() { Code = "+7", Name = "Russia", Flag = "üá∑üá∫" },
new() { Code = "+55", Name = "Brazil", Flag = "üáßüá∑" },
new() { Code = "+52", Name = "Mexico", Flag = "üá≤üáΩ" },
new() { Code = "+27", Name = "South Africa", Flag = "üáøüá¶" },
};

    protected override void OnInitialized()
    {
        filteredCountries = allCountries;
    }

    private void SwitchTab(bool toLogin)
    {
        isLoginTab = toLogin;
        errorMessage = null;
        successMessage = null;
        showCountryDropdown = false;
    }

    private void ToggleCountryDropdown()
    {
        showCountryDropdown = !showCountryDropdown;
        if (showCountryDropdown)
        {
            countrySearchQuery = "";
            filteredCountries = allCountries;
        }
    }

    private void FilterCountries()
    {
        if (string.IsNullOrWhiteSpace(countrySearchQuery))
        {
            filteredCountries = allCountries;
        }
        else
        {
            var query = countrySearchQuery.ToLower().Trim();
            filteredCountries = allCountries
            .Where(c =>
            c.Name.ToLower().Contains(query) ||
            c.Code.Replace("+", "").Contains(query.Replace("+", ""))
            )
            .ToList();
        }
    }

    private void SelectCountry(CountryCode country)
    {
        selectedCountry = country;
        showCountryDropdown = false;
        countrySearchQuery = "";
    }

    private async Task HandleLogin()
    {
        isLoading = true;
        errorMessage = null;
        successMessage = null;

        try
        {
            var result = await AuthService.LoginAsync(
            loginModel.Email!,
            loginModel.Password!,
            null,
            loginModel.RememberMe
            );

            if (result.Success)
            {
                successMessage = "‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à! ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏´‡∏ô‡πâ‡∏≤...";
                await Task.Delay(1000);
                NavigationManager.NavigateTo("/dashboard");
            }
            else
            {
                errorMessage = result.ErrorMessage;
            }
        }
        catch (Exception ex)
        {
            errorMessage = $"‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: {ex.Message}";
        }
        finally
        {
            isLoading = false;
        }
    }

    private async Task HandleRegister()
    {
        isLoading = true;
        errorMessage = null;
        successMessage = null;

        try
        {
            // Combine country code with phone number if phone number is provided
            string? fullPhoneNumber = null;
            if (!string.IsNullOrWhiteSpace(registerModel.PhoneNumber))
            {
                fullPhoneNumber = $"{selectedCountry.Code}{registerModel.PhoneNumber}";
            }

            var result = await AuthService.RegisterAsync(
            registerModel.Email!,
            registerModel.Password!,
            fullPhoneNumber
            );

            if (result.Success)
            {
                successMessage = "‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à! ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö...";
                await Task.Delay(1000);
                NavigationManager.NavigateTo("/dashboard");
            }
            else
            {
                errorMessage = result.ErrorMessage;
            }
        }
        catch (Exception ex)
        {
            errorMessage = $"‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: {ex.Message}";
        }
        finally
        {
            isLoading = false;
        }
    }

    public class LoginModel
    {
        [Required(ErrorMessage = "‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏≠‡∏µ‡πÄ‡∏°‡∏•")]
        [EmailAddress(ErrorMessage = "‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á")]
        public string? Email { get; set; }

        [Required(ErrorMessage = "‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô")]
        public string? Password { get; set; }

        public bool RememberMe { get; set; }
    }

    public class RegisterModel
    {
        [Required(ErrorMessage = "‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏≠‡∏µ‡πÄ‡∏°‡∏•")]
        [EmailAddress(ErrorMessage = "‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á")]
        public string? Email { get; set; }

        public string? PhoneNumber { get; set; }

        [Required(ErrorMessage = "‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô")]
        [MinLength(8, ErrorMessage = "‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 8 ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£")]
        public string? Password { get; set; }

        [Required(ErrorMessage = "‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô")]
        [Compare(nameof(Password), ErrorMessage = "‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ô")]
        public string? ConfirmPassword { get; set; }
    }

    public class CountryCode
    {
        public string Code { get; set; } = string.Empty;
        public string Name { get; set; } = string.Empty;
        public string Flag { get; set; } = string.Empty;
    }
}